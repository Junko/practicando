
<app-header title="Gestión de Usuarios" menuId="admin-menu"></app-header>

<ion-content [fullscreen]="true" class="usuarios-content" id="admin-content">
  <div class="content-wrapper">
    <!-- Título -->
    <div class="title-container">
      <h1 class="page-title">Usuarios</h1>
    </div>

    <!-- Barra de búsqueda -->
    <div class="search-container">
      <ion-searchbar 
        [(ngModel)]="searchTerm" 
        (ionInput)="onSearchChange($event)"
        placeholder="Buscar usuarios..."
        class="custom-searchbar">
      </ion-searchbar>
    </div>

    <!-- Filtros -->
    <div class="filters-container">
      <span class="filters-label">Filtros:</span>
      <div class="filter-buttons">
        <ion-button 
          [class.active]="selectedFilter === 'padres'"
          (click)="setFilter('padres')"
          class="filter-btn">
          Padres
        </ion-button>
        <ion-button 
          [class.active]="selectedFilter === 'admins'"
          (click)="setFilter('admins')"
          class="filter-btn">
          Admins
        </ion-button>
      </div>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="loading-container">
      <ion-spinner></ion-spinner>
      <p>Cargando usuarios...</p>
    </div>

    <!-- Lista de usuarios -->
    <div *ngIf="!loading" class="users-list">
      
      <!-- Mensaje si no hay usuarios -->
      <div *ngIf="filteredUsers.length === 0" class="empty-state">
        <ion-icon name="people-outline" size="large" color="medium"></ion-icon>
        <h3>No hay usuarios</h3>
        <p>No se encontraron usuarios con los filtros aplicados</p>
      </div>

      <!-- Lista de usuarios -->
      <div 
        *ngFor="let user of filteredUsers" 
        class="user-card">
        <div class="user-info">
          <div class="user-avatar">
            <img [src]="user.avatar" [alt]="user.name" class="avatar-img">
          </div>
          <div class="user-details">
            <h3 class="user-name">{{ user.name }}</h3>
            <p class="user-email">{{ user.email }}</p>
          </div>
        </div>
        <div class="user-actions">
          <ion-button fill="clear" (click)="editUser(user)" class="action-btn">
            <ion-icon name="create-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" (click)="deleteUser(user)" class="action-btn">
            <ion-icon name="trash-outline"></ion-icon>
          </ion-button>
        </div>
      </div>
    </div>

    <!-- Botón crear usuario -->
    <div class="create-user-container">
      <ion-button 
        (click)="createUser()" 
        class="create-user-btn"
        expand="block">
        + Crear Nuevo Usuario
      </ion-button>
    </div>
  </div>
</ion-content>

<!-- Componente de tabs personalizado para admin -->
<app-custom-tabs [config]="tabsConfig"></app-custom-tabs>
