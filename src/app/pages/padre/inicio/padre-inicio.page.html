
<app-header title="Panel Padre" menuId="padre-menu"></app-header>

<ion-content [fullscreen]="true" class="padre-content" id="padre-content">
  <div id="container">
    <h1 class="greeting">Hola, {{ userInfo?.nombres }}!</h1>
    <p class="children-title">Mis Hijos</p>

    <!-- Skeleton loader mientras carga -->
    <ng-container *ngIf="loading">
      <ion-card class="child-card skeleton-card" *ngFor="let i of [1, 2]">
        <ion-card-content>
          <div class="child-info">
            <div class="child-avatar skeleton-avatar">
              <ion-skeleton-text [animated]="true" style="width: 60px; height: 60px; border-radius: 50%;"></ion-skeleton-text>
            </div>
            <div class="child-details">
              <ion-skeleton-text [animated]="true" style="width: 70%; height: 20px; margin-bottom: 8px;"></ion-skeleton-text>
              <ion-skeleton-text [animated]="true" style="width: 50%; height: 16px; margin-bottom: 8px;"></ion-skeleton-text>
              <ion-skeleton-text [animated]="true" style="width: 40%; height: 14px; margin-bottom: 8px;"></ion-skeleton-text>
              <div class="progress-bar-container">
                <ion-skeleton-text [animated]="true" style="width: 100%; height: 8px; border-radius: 5px;"></ion-skeleton-text>
              </div>
            </div>
          </div>
          <ion-skeleton-text [animated]="true" style="width: 100%; height: 40px; border-radius: 8px; margin-top: 10px;"></ion-skeleton-text>
        </ion-card-content>
      </ion-card>
    </ng-container>

    <!-- Lista de hijos reales desde Firebase -->
    <ng-container *ngIf="!loading">
      <ion-card class="child-card" *ngFor="let hijo of hijos">
        <ion-card-content>
          <div class="child-info">
            <img src="https://ionicframework.com/docs/img/demos/avatar.svg" alt="Child Avatar" class="child-avatar">
            <div class="child-details">
              <ion-card-title>{{ hijo.nombre }} {{ hijo.apellido }}</ion-card-title>
              <ion-card-subtitle>{{ hijo.grado }} {{ hijo.nivel }} - {{ hijo.seccion }}</ion-card-subtitle>
              <p class="items-delivered">Items entregados - 0/0</p>
              <div class="progress-bar-container">
                <div class="progress-bar" style="width: 0%;"></div>
              </div>
            </div>
          </div>
          <ion-button expand="block" class="view-materials-button" [routerLink]="['/padre/ver-materiales', hijo.id]">
            <ion-icon name="checkbox-outline" slot="start"></ion-icon>
            Ver los materiales
          </ion-button>
        </ion-card-content>
      </ion-card>

      <!-- Mensaje cuando no hay hijos -->
      <div *ngIf="hijos.length === 0" class="empty-state">
        <ion-icon name="people-outline" size="large" color="medium"></ion-icon>
        <h3>No hay hijos registrados</h3>
        <p>Agrega tus hijos para ver sus listas de materiales</p>
      </div>
    </ng-container>

  </div>
</ion-content>

<!-- Componente de tabs personalizado para padre -->
<app-custom-tabs [config]="tabsConfig"></app-custom-tabs>
