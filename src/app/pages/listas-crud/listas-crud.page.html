
<app-header title="Gestión de Listas" menuId="admin-menu"></app-header>

<ion-content [fullscreen]="true" class="listas-crud-content" id="admin-content">

  <div class="content-container">
    <h2 class="page-title">Listas de Útiles</h2>
    <p class="page-subtitle">Gestiona las listas de útiles escolares</p>

    <!-- Loading -->
    <div *ngIf="loading" class="loading-container">
      <ion-spinner></ion-spinner>
      <p>Cargando listas...</p>
    </div>

    <!-- Botón para crear nueva lista -->
    <div *ngIf="!loading" class="create-button-container">
      <ion-button (click)="navigateToCreate()" expand="block" class="create-button">
        <ion-icon name="add-circle-outline" slot="start"></ion-icon>
        Crear Nueva Lista
      </ion-button>
    </div>

    <!-- Lista de listas existentes -->
    <div *ngIf="!loading" class="lists-container">
      <ion-card *ngFor="let lista of listas" class="lista-card">
        <ion-card-header>
          <ion-card-title>{{ lista.grado }} {{ lista.nivel }}</ion-card-title>
          <ion-card-subtitle>Año: {{ lista.anio }}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <p><strong>Materiales:</strong> {{ lista.materiales?.length || 0 }} items</p>
        </ion-card-content>
        <ion-card-content class="buttons-container">
          <ion-button fill="outline" size="small" (click)="verDetalleLista(lista)" [routerLink]="['/listas-crud/ver-lista', lista.id]">
            <ion-icon name="eye" slot="start"></ion-icon>
            Ver
          </ion-button>
          <ion-button fill="outline" size="small" (click)="editLista(lista)">
            <ion-icon name="create" slot="start"></ion-icon>
            Editar
          </ion-button>
          <ion-button fill="outline" color="danger" size="small" (click)="deleteLista(lista)">
            <ion-icon name="trash" slot="start"></ion-icon>
            Eliminar
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Mensaje cuando no hay listas -->
    <div *ngIf="listas.length === 0" class="empty-state">
      <ion-icon name="list" size="large" color="medium"></ion-icon>
      <h3>No hay listas creadas</h3>
      <p>Crea tu primera lista de útiles escolares</p>
      <ion-button (click)="navigateToCreate()" fill="solid" color="primary">
        <ion-icon name="add" slot="start"></ion-icon>
        Crear Lista
      </ion-button>
    </div>
  </div>

</ion-content>

<!-- Componente de tabs personalizado para admin -->
<app-custom-tabs [config]="tabsConfig"></app-custom-tabs>