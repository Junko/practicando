<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/crear-usuario"></ion-back-button>
    </ion-buttons>
    <ion-title>Crear Hijos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container">
    <!-- Texto instructivo -->
    <div class="instruction-text">
      <p>A continuación coloque la información de todos los hijos inscritos</p>
    </div>

    <!-- Formulario con fondo amarillo -->
    <div class="form-container">
      <div class="form-field">
        <label>Nombre:</label>
        <ion-input 
          type="text" 
          placeholder="Ingrese el nombre"
          [(ngModel)]="hijo.nombre">
        </ion-input>
      </div>

      <div class="form-field">
        <label>Apellido:</label>
        <ion-input 
          type="text" 
          placeholder="Ingrese el apellido"
          [(ngModel)]="hijo.apellido">
        </ion-input>
      </div>

      <div class="form-field">
        <label>Nivel:</label>
        <ion-select 
          placeholder="Seleccione el nivel"
          [(ngModel)]="hijo.nivel"
          (ionChange)="onNivelChange()">
          <ion-select-option value="inicial">Inicial</ion-select-option>
          <ion-select-option value="primaria">Primaria</ion-select-option>
          <ion-select-option value="secundaria">Secundaria</ion-select-option>
        </ion-select>
      </div>

      <div class="form-row">
        <div class="form-field half">
          <label>Grado:</label>
          <ion-select 
            placeholder="Seleccione el grado"
            [(ngModel)]="hijo.grado"
            (ionChange)="onGradoChange()">
            <ion-select-option 
              *ngFor="let grado of gradosDisponibles" 
              [value]="grado">
              {{ grado }}
            </ion-select-option>
          </ion-select>
        </div>
        <div class="form-field half">
          <label>Sección:</label>
          <ion-select 
            placeholder="Seleccione la sección"
            [(ngModel)]="hijo.seccion">
            <ion-select-option value="A">A</ion-select-option>
            <ion-select-option value="B">B</ion-select-option>
            <ion-select-option value="C">C</ion-select-option>
          </ion-select>
        </div>
      </div>
    </div>

    <!-- Botón Guardar hijo -->
    <ion-button 
      expand="block" 
      fill="outline" 
      class="save-button"
      (click)="guardarHijo()">
      <ion-icon name="save" slot="start"></ion-icon>
      Guardar hijo/a
    </ion-button>

    <!-- Lista de hijos agregados -->
    <div class="hijos-list" *ngIf="hijos.length > 0">
      <h3>Hijos registrados:</h3>
      <ion-card *ngFor="let hijo of hijos; let i = index" class="hijo-card">
        <ion-card-content>
          <div class="hijo-info">
            <span class="hijo-name">{{ hijo.nombre }} {{ hijo.apellido }}</span>
            <span class="hijo-details">{{ hijo.nivel }} - {{ hijo.grado }}° {{ hijo.seccion }}</span>
          </div>
          <ion-button 
            fill="clear" 
            color="danger" 
            size="small"
            (click)="eliminarHijo(i)">
            <ion-icon name="trash"></ion-icon>
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Botón Registrar -->
    <ion-button 
      expand="block" 
      class="register-button"
      (click)="registrarHijos()"
      [disabled]="hijos.length === 0">
      Registrar
    </ion-button>
  </div>
</ion-content>
