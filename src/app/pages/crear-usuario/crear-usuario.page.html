<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/usuarios-crud"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <strong>Crear Usuario</strong>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="crear-usuario-content">

  <form [formGroup]="form" class="create-user-form" (ngSubmit)="submit()">
    
    <!-- Sección de Datos de Login (Fondo blanco) -->
    <div class="login-section">
      <h2 class="section-subtitle">Ingrese los datos para el Login:</h2>
      
      <div class="input-group">
        <label class="input-label">CORREO</label>
        <app-custom-input 
          [control]="form.controls.correo"
          type="email"
          label=""
          icon=""
          autocomplete="email">
        </app-custom-input>
        <div class="validators" *ngIf="form.controls.correo.errors && form.controls.correo.touched">
          <div *ngIf="form.controls.correo.errors?.['required']">El correo es requerido</div>
          <div *ngIf="form.controls.correo.errors?.['email']">Ingrese un correo válido</div>
        </div>
      </div>

      <div class="input-group">
        <label class="input-label">CONTRASEÑA</label>
        <app-custom-input 
          [control]="form.controls.contrasena"
          type="password"
          label=""
          icon=""
          autocomplete="new-password">
        </app-custom-input>
        <div class="validators" *ngIf="form.controls.contrasena.errors && form.controls.contrasena.touched">
          <div *ngIf="form.controls.contrasena.errors?.['required']">La contraseña es requerida</div>
          <div *ngIf="form.controls.contrasena.errors?.['minlength']">Mínimo 6 caracteres</div>
        </div>
      </div>
    </div>

    <!-- Sección de Datos Personales (Fondo amarillo) -->
    <div class="personal-data-section">
      <h2 class="personal-data-title">Datos Personales</h2>
      
      <div class="input-group">
        <label class="input-label">NOMBRE</label>
        <app-custom-input 
          [control]="form.controls.nombres"
          type="text"
          label=""
          icon=""
          autocomplete="given-name">
        </app-custom-input>
        <div class="validators" *ngIf="form.controls.nombres.errors && form.controls.nombres.touched">
          <div *ngIf="form.controls.nombres.errors?.['required']">El nombre es requerido</div>
        </div>
      </div>

      <div class="input-group">
        <label class="input-label">APELLIDO</label>
        <app-custom-input 
          [control]="form.controls.apellidos"
          type="text"
          label=""
          icon=""
          autocomplete="family-name">
        </app-custom-input>
        <div class="validators" *ngIf="form.controls.apellidos.errors && form.controls.apellidos.touched">
          <div *ngIf="form.controls.apellidos.errors?.['required']">El apellido es requerido</div>
        </div>
      </div>

      <div class="input-group">
        <label class="input-label">TELÉFONO</label>
        <app-custom-input 
          [control]="form.controls.telefono"
          type="tel"
          label=""
          icon=""
          autocomplete="tel">
        </app-custom-input>
        <div class="validators" *ngIf="form.controls.telefono.errors && form.controls.telefono.touched">
          <div *ngIf="form.controls.telefono.errors?.['required']">El teléfono es requerido</div>
        </div>
      </div>

      <div class="input-group">
        <label class="input-label">TIPO DE USUARIO</label>
        <ion-select [formControl]="form.controls.rol" placeholder="Seleccione el tipo">
          <ion-select-option value="padre">Padre</ion-select-option>
          <ion-select-option value="admin">Admin</ion-select-option>
        </ion-select>
        <div class="validators" *ngIf="form.controls.rol.errors && form.controls.rol.touched">
          <div *ngIf="form.controls.rol.errors?.['required']">El tipo de usuario es requerido</div>
        </div>
      </div>

      <!-- Botón Continuar dentro del cuadro amarillo -->
      <div class="button-container">
        <ion-button expand="block" mode="ios" fill="solid" color="dark" type="submit" class="continue-button">
          Continuar
        </ion-button>
      </div>

    </div>

  </form>

</ion-content>
